<naw xmlns="http://www.naw.org/schema/naw"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.naw.org/schema/naw
                         http://www.naw.org/schema/naw.xsd">

    <!--
    <process name="a">
        <noop />
        <merge from="c" to="d" />
        
        <if>
	        <expression language="ognl">
	            false
	        </expression>
	        
	        <noop />
        <else />
            <noop />
        </if>
        
        <receive from="file:/tmp/x.txt">
            <received varName="abcde">
                <noop />
            </received>
            
            <timeout duration="PT1H">
                <noop />
            </timeout>
        </receive>
    </process>

    <process name="b">
        <fork>
            <flow>
                <wait until="2012-03-12T05:30:30" />

                <noop />
            </flow>
            <flow>
                <noop />
            </flow>
            <flow>
                <noop />
            </flow>
        </fork>
        
        <send to="file:/tmp/x.txt" varName="request" retriable="false" />
    </process>
    -->
    
    <process name="c">
        <receive from="file:/tmp/x.txt" entryPoint="true">
            <received varName="abcde">
                <expression language="ognl">@java.lang.System@out.println('1' + exchange)</expression>

                <send to="file:/tmp/x2.txt" varName="abcde" retriable="false" exchange="za" />

                <expression language="ognl">@java.lang.System@out.println('2' + exchange)</expression>

                <receive from="file:/tmp/x2.txt" exchange="za">
                    <received varName="zzzz">
                        <expression language="ognl">@java.lang.System@out.println('3' + exchange)</expression>
                    </received>

                    <timeout duration="PT5S">
                        <expression language="ognl">@java.lang.System@out.println('4' + exchange)</expression>
                    </timeout>
                </receive>
            </received>
        </receive>
    </process>
</naw>
